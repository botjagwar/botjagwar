language: python

python:
  - "3.6"

addons:
  apt:
    packages:
      - "python3"
      - "python3-pip"

sudo: required

os: linux
dist: bionic

# command to install dependencies
install:
  - sudo apt-get install libssl-dev wget unzip libsqlite3-dev libxml2-dev libxslt1-dev
  - sudo ln -s /opt/python/3.6.5/bin/python3 /usr/bin/python3.6
  - sudo python3.6 -m pip install -r requirements.txt
  - make install

# command to run tests
test_requirements: install
  - cp -r test /opt/botjagwar/test
  - sudo python3.6 -m pip install nose

unit_tests: test_requirements
  - PYWIKIBOT2_NO_USER_CONFIG=1 sudo /opt/python/3.6.5/bin/python3 -m "nose" -v /opt/botjagwar/test/unit_tests

full_test: test_requirements
  - PYWIKIBOT2_NO_USER_CONFIG=1 sudo /opt/python/3.6.5/bin/python3 -m "nose" -v /opt/botjagwar/test
  - make uninstall